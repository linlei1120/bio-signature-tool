# 手写签名提取程序

这是一个基于Python和OpenCV的手写签名提取工具，可以从图片中自动识别并提取签名，生成透明背景的PNG图片。

## 功能特性

- ✅ **从图片文件提取签名**: 支持JPG、PNG、BMP等常见图片格式
- ✅ **实时摄像头拍照**: 通过摄像头实时拍照并提取签名
- ✅ **批量处理**: 支持批量处理文件夹中的所有图片
- ✅ **自动背景去除**: 自动去除背景，生成透明PNG图片
- ✅ **智能签名检测**: 自动检测签名区域并裁剪
- ✅ **可调节阈值**: 支持自定义阈值以适应不同的图片质量

## 安装依赖

```bash
pip install -r requirements.txt
```

或者手动安装：

```bash
pip install opencv-python numpy
```

## 使用方法

### 1. 运行程序

```bash
python signature_extractor.py
```

### 2. 选择模式

程序启动后会显示菜单，提供三种模式：

#### 模式1: 从图片文件提取签名
- 输入图片文件的路径
- 可选择使用自动阈值或自定义阈值
- 程序会自动提取签名并保存

#### 模式2: 实时摄像头拍照提取签名
- 打开摄像头实时预览
- 按键操作：
  - `c` 或 `空格` - 拍照并提取签名
  - `s` - 保存当前提取的签名
  - `+` - 增加阈值（使签名更细）
  - `-` - 减少阈值（使签名更粗）
  - `q` 或 `ESC` - 退出

#### 模式3: 批量处理文件夹中的图片
- 输入包含图片的文件夹路径
- 程序会自动处理文件夹中所有支持的图片格式
- 提取的签名会保存到 `extracted_signatures` 文件夹

## 输出文件

所有提取的签名都会保存在 `extracted_signatures` 文件夹中，文件名格式：
- 从文件提取: `原文件名_signature.png`
- 实时拍照: `signature_YYYYMMDD_HHMMSS.png`

## 技术实现

程序使用以下技术：
- **OpenCV**: 图像处理和计算机视觉
- **NumPy**: 数值计算
- **自适应阈值**: 自动适应不同光照条件
- **形态学操作**: 去除噪声和优化签名
- **轮廓检测**: 自动定位签名区域
- **Alpha通道**: 生成透明背景的PNG图片

## 最佳实践

1. **图片质量**: 使用高对比度的图片效果最佳（深色签名，浅色背景）
2. **光照条件**: 实时拍照时保持良好的光照
3. **背景简洁**: 背景越简洁，提取效果越好
4. **阈值调节**: 如果自动阈值效果不佳，可以手动调节

## 示例

### 从文件提取
```
请选择模式: 1
请输入图片文件路径: signature.jpg
是否使用自定义阈值？(y/n, 默认n): n
正在处理图像: signature.jpg
签名已保存到: extracted_signatures/signature_signature.png
✓ 签名提取成功！
```

### 实时摄像头
```
请选择模式: 2
=== 实时摄像头签名提取模式 ===
操作说明:
  按 'c' 或 '空格' - 拍照并提取签名
  按 's' - 保存当前提取的签名
  按 'q' 或 'ESC' - 退出
  按 '+' - 增加阈值（使签名更细）
  按 '-' - 减少阈值（使签名更粗）
================================
```

## 故障排除

1. **摄像头无法打开**: 检查摄像头是否被其他程序占用
2. **未检测到签名**: 尝试调整阈值或改善图片质量
3. **提取效果不佳**: 确保背景和签名有足够的对比度

## 许可证

本项目仅供学习和研究使用。

## 作者

由AI助手开发

